"""This module is responsible for bootstrap config"""
from pathlib import Path
from typing import Any, Dict, Union

from genesys_unified_config.envoy.common import socket_address, path_config_source


# pylint: disable=E1136
def bootstrap(admin_address: str,
              admin_port: Union[int, str],
              cluster_name: str,
              node_id: str,
              cds_file: Path,
              lds_file: Path) -> Dict[str, Any]:
    """
    A function to generate the envoy bootstrap contents

    :param admin_address: The address on which envoy admin endpoint listens
    :param admin_port: The port on which envoy admin endpoint listens
    :param cluster_name: Name of the envoy cluster
    :param node_id: Node ID of the envoy cluster
    :param cds_file: The cluster discovery service file path
    :param lds_file: The listener discovery service file path

    :return: A dict containing the envoy bootstrap configuration
    """
    return {
        'admin': {
            'address': socket_address(address=admin_address, port=admin_port)
        },
        'node': {
            'cluster': cluster_name,
            'id': node_id
        },
        'dynamic_resources': {
            'cds_config': path_config_source(cds_file),
            'lds_config': path_config_source(lds_file)
        }
    }
