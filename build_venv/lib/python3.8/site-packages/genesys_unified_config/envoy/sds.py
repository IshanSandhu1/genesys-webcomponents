"""This module contains envoy sds config"""
from pathlib import Path
from typing import Any, List, Dict


def tls_cert_secret_resource(secret_name: str, cert_chain_file: Path, private_key_file: Path) -> Dict[str, Any]:
    """
    A function to generate a tls cert secret resource

    :param secret_name: Name of the secret resource
    :param cert_chain_file: absolute path to the cert chain file
    :param private_key_file: absolute path to the cert private key file

    :return: Envoy TLS secret resource configuration
    """
    return {
        '@type': 'type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.Secret',
        'name': secret_name,
        'tls_certificate': {
            'certificate_chain': {
                'filename': f'{cert_chain_file}'
            },
            'private_key': {
                'filename': f'{private_key_file}'
            }
        }
    }


def sds(sds_resources: List[Dict[str, Any]]) -> Dict[str, Any]:
    """
    A function to generate a secret discovery service file content

    :param sds_resources: A list of secret resource to include in the sds file.

    :return: Envoy SDS file content configuration
    """
    return {
        'version_info': '0',
        'resources': sds_resources
    }
